import Head from 'next/head';
import { parse } from 'cookie';
import MainLayout from '../components/MainLayout';
import { COOKIE_NAME } from '@/constants/auth';

export const getServerSideProps = context => {
  const cookies = parse(context.req.headers?.cookie ?? '');
  const hasLoggedIn = Boolean(cookies[COOKIE_NAME]);
  return {
    props: {
      hasLoggedIn
    }
  };
};

export default function Home({ hasLoggedIn }) {
  return (
    <>
      <Head>
        <title>Expenses Tracker</title>
        <meta name="description" content="Generated by create next app" />
        <link rel="icon" href="/favicon.ico" />
      </Head>
      <MainLayout hasLoggedIn={hasLoggedIn} hasAuthButton={true}>
        CONTENT
      </MainLayout>
    </>
  );
}
